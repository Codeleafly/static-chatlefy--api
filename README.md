# Chatlefy AI Backend Server ЁЯМРЁЯдЦ

Chatlefy рдПрдХ рдордЬрд╝рдмреВрдд рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдмреИрдХрдПрдВрдб рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ Google рдХреЗ Gemini AI рджреНрд╡рд╛рд░рд╛ рд╕рдВрдЪрд╛рд▓рд┐рдд рд╣реИ, рдЬрд┐рд╕реЗ рд╕рдВрд╡рд╛рджрд╛рддреНрдордХ AI рдХреНрд╖рдорддрд╛рдПрдБ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЗрд╕рдореЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЪреИрдЯ рд╕реЗрд╢рди, рджреИрдирд┐рдХ рдЕрдиреБрд░реЛрдз рд╕реАрдорд╛рдПрдБ рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдПрдХреНрд╕реЗрд╕ рдХрдВрдЯреНрд░реЛрд▓ рдЬреИрд╕реА рд╕реБрд╡рд┐рдзрд╛рдПрдБ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред

## тЬи рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ (Features)

* **Google Gemini AI рдЗрдВрдЯреАрдЧреНрд░реЗрд╢рди**: рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рд╕рдВрд╡рд╛рджрд╛рддреНрдордХ AI рдХреЗ рд▓рд┐рдП `gemini-2.5-flash-preview-05-20` рдореЙрдбрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред
* **рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЪреИрдЯ рд╕реЗрд╢рди**: рдкреНрд░рддреНрдпреЗрдХ `userId` рдХреЗ рд▓рд┐рдП рдЗрди-рдореЗрдореЛрд░реА рдЪреИрдЯ рдЗрддрд┐рд╣рд╛рд╕ рдХреЛ рдмрдирд╛рдП рд░рдЦрддрд╛ рд╣реИред
* **рд╕реБрд░рдХреНрд╖рд┐рдд рдкреНрд░рдердо-рдмрд╛рд░ рдПрдХреНрд╕реЗрд╕**: рд╕реБрд░рдХреНрд╖рд╛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдПрдХреНрд╕реЗрд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреВрд░реНрд╡-рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдкрд╛рд╕рд╡рд░реНрдб рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред
* **рджреИрдирд┐рдХ рдЕрдиреБрд░реЛрдз рджрд░-рд╕реАрдорд┐рдд (Rate Limiting)**: рдкреНрд░рддрд┐ рджрд┐рди рдПрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдХрд┐рдП рдЬрд╛ рд╕рдХрдиреЗ рд╡рд╛рд▓реЗ AI рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рд╕реАрдорд┐рдд рдХрд░рддрд╛ рд╣реИ (рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдпреЛрдЧреНрдп)ред
* **рдЕрдиреБрдХреВрд▓рди рдпреЛрдЧреНрдп рд╕рд┐рд╕реНрдЯрдо рдкреНрд░реЙрдореНрдкреНрдЯ**: рдмрд╛рд╣рд░реА `system.instruction.prompt` рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ AI рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░реЗрдВред
* **рдордЬрдмреВрдд рд▓реЙрдЧрд┐рдВрдЧ**: рдХрдВрд╕реЛрд▓ рдФрд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рд╡реНрдпрд╛рдкрдХ рд▓реЙрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП `winston` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред
* **CORS рдкреНрд░рдмрдВрдзрди**: API рдПрдХреНрд╕реЗрд╕ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рдХреНрд░реЙрд╕-рдСрд░рд┐рдЬрди рд░рд┐рд╕реЛрд░реНрд╕ рд╢реЗрдпрд░рд┐рдВрдЧ (CORS)ред
* **рдкрд░реНрдпрд╛рд╡рд░рдг рд╡реЗрд░рд┐рдПрдмрд▓ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди**: `.env` рдлрд╝рд╛рдЗрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЖрд╕рд╛рди рд╕реЗрдЯрдЕрдкред

## ЁЯЫая╕П рдЙрдкрдпреЛрдЧ рдХреА рдЧрдИ рддрдХрдиреАрдХреЗрдВ (Technologies Used)

* **Node.js**: рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рдЗрд╡реЗрдВрдЯ-рдбреНрд░рд┐рд╡реЗрди рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд░рдирдЯрд╛рдЗрдоред
* **Express.js**: Node.js рдХреЗ рд▓рд┐рдП рддреЗрдЬрд╝, рдмрд┐рдирд╛ рд░рд╛рдп рд╡рд╛рд▓рд╛, рдиреНрдпреВрдирддрдо рд╡реЗрдм рдлреНрд░реЗрдорд╡рд░реНрдХред
* **Google Generative AI SDK**: рдЬреЗрдорд┐рдиреА рдореЙрдбрд▓реЛрдВ рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░реИрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред
* **Winston**: рдПрдХ рдмрд╣реБрдореБрдЦреА рд▓реЙрдЧрд┐рдВрдЧ рд▓рд╛рдЗрдмреНрд░реЗрд░реАред
* **Dotenv**: `.env` рдлрд╝рд╛рдЗрд▓ рд╕реЗ рдкрд░реНрдпрд╛рд╡рд░рдг рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред
* **CORS**: Node.js рдкреИрдХреЗрдЬ рдЬреЛ рдПрдХ Connect/Express рдорд┐рдбрд▓рд╡реЗрдпрд░ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд┐рднрд┐рдиреНрди рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рд╕рд╛рде CORS рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

## ЁЯЪА рд╢реБрд░реВ рдХрд░рдирд╛ (Getting Started)

Chatlefy рдмреИрдХрдПрдВрдб рд╕рд░реНрд╡рд░ рдХреЛ рд╕реЗрдЯ рдЕрдк рдФрд░ рд░рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрди рдЪрд░рдгреЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВред

### рдкреВрд░реНрд╡рд╛рдкреЗрдХреНрд╖рд╛рдПрдБ (Prerequisites)

рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реНрдерд╛рдкрд┐рдд рд╣реИрдВ:

* [Node.js](https://nodejs.org/en/download/) (v14.x рдпрд╛ рдЙрдЪреНрдЪрддрд░ рдЕрдиреБрд╢рдВрд╕рд┐рдд)
* [npm](https://www.npmjs.com/get-npm) (Node.js рдХреЗ рд╕рд╛рде рдЖрддрд╛ рд╣реИ)

### рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди (Installation)

1. **рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдХреНрд▓реЛрди рдХрд░реЗрдВ:**
```bash
git clone <рдЖрдкрдХреЗ-рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА-рдХрд╛-URL>
cd <рдЖрдкрдХреЗ-рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА-рдХрд╛-рдирд╛рдо>
```

2. **рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ:**
```bash
npm install
```

### рдкрд░реНрдпрд╛рд╡рд░рдг рд╡реЗрд░рд┐рдПрдмрд▓ ЁЯФС (Environment Variables)

рдЕрдкрдиреА рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдХреЗ рд░реВрдЯ рдореЗрдВ рдПрдХ `.env` рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдБ рдФрд░ рдЗрд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реЗ рднрд░реЗрдВ:

```env
API_KEY=рдЖрдкрдХрд╛_GOOGLE_GEMINI_API_KEY
ENCRYPTION_KEY=рдЖрдкрдХреА_рд╕реБрд░рдХреНрд╖рд┐рдд_32_BYTE_рдПрдирдХреНрд░рд┐рдкреНрдЯрди_рдХреА
PASSWORD=рдЖрдкрдХрд╛_рд╕реАрдХреНрд░реЗрдЯ_рдкрд╣рд▓рд╛_рдпреВрдЬрд░_рдкрд╛рд╕рд╡рд░реНрдб
PORT=3000
ALLOWED_ORIGINS=http://localhost:5173,https://yourfrontend.com
```

* `API_KEY`: Google AI Studio рдпрд╛ Google Cloud рд╕реЗ рдЖрдкрдХреА API рдХреБрдВрдЬреАред
* `ENCRYPTION_KEY`: рд╕рдВрднрд╛рд╡рд┐рдд рднрд╡рд┐рд╖реНрдп рдХреА рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдЬрд╝рд░реВрд░рддреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдордЬрдмреВрдд, рдмреЗрддрд░рддреАрдм рдврдВрдЧ рд╕реЗ рдЬрдирд░реЗрдЯ рдХреА рдЧрдИ 32-рдмрд╛рдЗрдЯ (256-рдмрд┐рдЯ) рдХреБрдВрдЬреАред рдЖрдк рдЗрд╕реЗ `node -e "console.log(crypto.randomBytes(32).toString('hex'))"` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЬрдирд░реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
* `PASSWORD`: рдирдП `userId` рдХреЗ рд▓рд┐рдП рдЪреИрдЯ рд╕реЗрд╡рд╛ рддрдХ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдкрд╣реБрдБрдЪ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдкрд╛рд╕рд╡рд░реНрдбред
* `PORT`: рдкреЛрд░реНрдЯ рдирдВрдмрд░ рдЬрд┐рд╕ рдкрд░ рд╕рд░реНрд╡рд░ рдЪрд▓реЗрдЧрд╛ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ: 3000)ред
* `ALLOWED_ORIGINS`: рдСрд░рд┐рдЬрди (рдлреНрд░рдВрдЯрдПрдВрдб URL) рдХреА рдПрдХ рдХреЙрдорд╛-рд╕реЗрдкрд░реЗрдЯреЗрдб рд╕реВрдЪреА рдЬрд┐рдиреНрд╣реЗрдВ CORS рдиреАрддрд┐ рдХреЗ рдХрд╛рд░рдг рдЖрдкрдХреА API рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИред рдпрджрд┐ рдХреЛрдИ рдСрд░рд┐рдЬрди рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рд╣реИ, рддреЛ рдХрд┐рд╕реА рднреА рдСрд░рд┐рдЬрди рд╕реЗ рдЕрдиреБрд░реЛрдз CORS рджреНрд╡рд╛рд░рд╛ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░ рджрд┐рдП рдЬрд╛рдПрдВрдЧреЗред

### рд╕рд┐рд╕реНрдЯрдо рдЗрдВрд╕реНрдЯреНрд░рдХреНрд╢рди рдкреНрд░реЙрдореНрдкреНрдЯ ЁЯза (System Instruction Prompt)

рд░реВрдЯ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ `system.instruction.prompt` рдирд╛рдо рдХреА рдПрдХ рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдБред рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ AI рдореЙрдбрд▓ рдХреЗ рд▓рд┐рдП рд╕рд┐рд╕реНрдЯрдо-рд╕реНрддрд░ рдХреЗ рдирд┐рд░реНрджреЗрд╢ рд╣реЛрдВрдЧреЗред

**рдЙрджрд╛рд╣рд░рдг `system.instruction.prompt`:**
```
You are Chatlefy, an AI assistant made by Smart Tell Line. You are an expert in code generation. Your default language is English, but you can communicate in any language. When generating HTML, CSS, JavaScript, ensure the user interface is professional with modern icons and symbols. Do not include your signature (Smart Tell Line or Chatlefy) in the generated code.
```
рдпрджрд┐ рдпрд╣ рдлрд╝рд╛рдЗрд▓ рдирд╣реАрдВ рдорд┐рд▓рддреА рд╣реИ, рддреЛ рдПрдХ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдкреНрд░реЙрдореНрдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред

### рд╕рд░реНрд╡рд░ рдЪрд▓рд╛рдПрдБ (Running the Server)

рд╕рд░реНрд╡рд░ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЪрд▓рд╛рдПрдБ:

```bash
node server.js
```

рдЖрдкрдХреЛ рдПрдХ рд▓реЙрдЧ рд╕рдВрджреЗрд╢ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдП рдЬреИрд╕реЗ:
`[Timestamp] INFO: Chatlefy running on http://localhost:3000`

## ЁЯУб API рдПрдВрдбрдкреЙрдЗрдВрдЯ (API Endpoint)

рд╕рд░реНрд╡рд░ рдЪреИрдЯ рдЗрдВрдЯрд░реИрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд┐рдВрдЧрд▓ `POST` рдПрдВрдбрдкреЙрдЗрдВрдЯ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

### `POST /chat`

**рд╡рд┐рд╡рд░рдг**: AI рдХреЗ рд╕рд╛рде рдПрдХ рдЪреИрдЯ рд╕реЗрд╢рди рд╢реБрд░реВ рдпрд╛ рдЬрд╛рд░реА рдХрд░рддрд╛ рд╣реИред
**рдЕрдиреБрд░реЛрдз рдмреЙрдбреА (Request Body)**:
```json
{
"userId": "uniqueUserIdentifier",
"message": "Chatlefy рдХреЛ рдЖрдкрдХрд╛ рд╕рдВрджреЗрд╢"
}
```
* `userId` (рд╕реНрдЯреНрд░рд┐рдВрдЧ, **рдЕрдирд┐рд╡рд╛рд░реНрдп**): рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ред рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЪреИрдЯ рдЗрддрд┐рд╣рд╛рд╕ рдХреЛ рдмрдирд╛рдП рд░рдЦрдиреЗ рдФрд░ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдЯреНрд░реИрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред
* `message` (рд╕реНрдЯреНрд░рд┐рдВрдЧ, **рдЕрдирд┐рд╡рд╛рд░реНрдп**): AI рдХреЛ рднреЗрдЬрд╛ рдЧрдпрд╛ рдЯреЗрдХреНрд╕реНрдЯ рд╕рдВрджреЗрд╢ред

**рдкреНрд░рдердо-рдмрд╛рд░ рдПрдХреНрд╕реЗрд╕ / рдкреНрд░рдорд╛рдгреАрдХрд░рдг ЁЯФС (First-Time Access / Authentication)**
рдЬрдм рдПрдХ `userId` рдЕрдкрдирд╛ рдкрд╣рд▓рд╛ рд╕рдВрджреЗрд╢ рднреЗрдЬрддрд╛ рд╣реИ, рддреЛ `message` рд╕рд╛рдордЧреНрд░реА **рдЖрдкрдХреЗ `.env` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд `PASSWORD` рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред** рдпрд╣ рдЪреИрдЯ рд╕реЗрд╢рди рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рди-рдЯрд╛рдЗрдо рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИред

**рдкреНрд░рдердо-рдмрд╛рд░ рдЕрдиреБрд░реЛрдз рдХрд╛ рдЙрджрд╛рд╣рд░рдг (Example First-Time Request):**
```json
{
"userId": "user_alice",
"message": "рдЖрдкрдХрд╛_рд╕реАрдХреНрд░реЗрдЯ_рдкрд╣рд▓рд╛_рдпреВрдЬрд░_рдкрд╛рд╕рд╡рд░реНрдб"
}
```
**рд╕рдлрд▓ рдкреНрд░рдердо-рдмрд╛рд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ (Successful First-Time Response):**
```json
{
"reply": "Access granted. You can now start chatting."
}
```
**рдЕрд╕рдлрд▓ рдкреНрд░рдердо-рдмрд╛рд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ (Failed First-Time Response):**
```json
{
"reply": "Unauthorized access. Provide valid password."
}
}
```
**рдмрд╛рдж рдХреЗ рдЕрдиреБрд░реЛрдз (Subsequent Requests):**
рд╕рдлрд▓ рдкреНрд░рдердо-рдмрд╛рд░ рдПрдХреНрд╕реЗрд╕ рдХреЗ рдмрд╛рдж, рдЙрд╕реА `userId` рд╕реЗ рдЖрдиреЗ рд╡рд╛рд▓реЗ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ AI рджреНрд╡рд╛рд░рд╛ рдкреНрд░реЛрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред

**рдмрд╛рдж рдХреЗ рдЕрдиреБрд░реЛрдз рдХрд╛ рдЙрджрд╛рд╣рд░рдг (Example Subsequent Request):**
```json
{
"userId": "user_alice",
"message": "рдирдорд╕реНрддреЗ Chatlefy, рдХреНрдпрд╛ рдЖрдк рдореБрдЭреЗ рд▓реЙрдЧрд┐рди рдкреЗрдЬ рдХреЗ рд▓рд┐рдП рдХреБрдЫ HTML рдмрдирд╛рдиреЗ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ?"
}
```
**рд╕рдлрд▓ AI рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ (Successful AI Response):**
```json
{
"reply": "рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ! рдпрд╣рд╛рдБ рд▓реЙрдЧрд┐рди рдкреЗрдЬ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдмреБрдирд┐рдпрд╛рджреА HTML рд╣реИ..."
}
```

### рджрд░ рд╕реАрдорд┐рдд рдХрд░рдирд╛ ЁЯЪл (Rate Limiting)

рдкреНрд░рддреНрдпреЗрдХ `userId` рдкреНрд░рддрд┐ 24 рдШрдВрдЯреЗ рдХреА рдЕрд╡рдзрд┐ рдореЗрдВ `50` рдЕрдиреБрд░реЛрдзреЛрдВ рддрдХ рд╕реАрдорд┐рдд рд╣реИ (рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ `MAX_REQUESTS_PER_DAY` рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдпреЛрдЧреНрдп)ред рдпрджрд┐ рд╕реАрдорд╛ рдкрд╛рд░ рд╣реЛ рдЬрд╛рддреА рд╣реИ, рддреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ `429 Too Many Requests` рддреНрд░реБрдЯрд┐ рдкреНрд░рд╛рдкреНрдд рд╣реЛрдЧреАред

**рджрд░ рд╕реАрдорд╛ рдкрд╛рд░ рд╣реБрдИ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ (Rate Limit Exceeded Response):**
```json
{
"reply": "Rate limit exceeded for today."
}
```

### рддреНрд░реБрдЯрд┐ рд╣реИрдВрдбрд▓рд┐рдВрдЧ (Error Handling)

API рдореЗрдВ рдЗрдирдкреБрдЯ рдореЗрдВ рдЕрдорд╛рдиреНрдпрддрд╛ рдФрд░ рд╕рд░реНрд╡рд░-рд╕рд╛рдЗрдб рдореБрджреНрджреЛрдВ рдХреЗ рд▓рд┐рдП рдмреБрдирд┐рдпрд╛рджреА рддреНрд░реБрдЯрд┐ рд╣реИрдВрдбрд▓рд┐рдВрдЧ рд╢рд╛рдорд┐рд▓ рд╣реИред

* `400 Bad Request`: рдЕрдиреБрд░реЛрдз рдмреЙрдбреА рдореЗрдВ рдЕрдорд╛рдиреНрдп `userId` рдпрд╛ `message`ред
```json
{ "reply": "Invalid input" }
```
* `403 Forbidden`: рдкреНрд░рдердо-рдмрд╛рд░ рд▓реЙрдЧ рдЗрди рдХреЗ рджреМрд░рд╛рди рдЕрдирд╛рдзрд┐рдХреГрдд рдкрд╣реБрдБрдЪред
```json
{ "reply": "Unauthorized access. Provide valid password." }
```
* `429 Too Many Requests`: рджреИрдирд┐рдХ рджрд░ рд╕реАрдорд╛ рдкрд╛рд░ рд╣реЛ рдЧрдИред
```json
{ "reply": "Rate limit exceeded for today." }
```
* `500 Internal Server Error`: AI рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдХреЗ рджреМрд░рд╛рди рдПрдХ рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рддреНрд░реБрдЯрд┐ рд╣реБрдИред
```json
{ "reply": "Chatlefy is currently unavailable." }
```

## ЁЯк╡ рд▓реЙрдЧрд┐рдВрдЧ (Logging)

рд╕рд░реНрд╡рд░ рд▓реЙрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП `winston` рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред рд▓реЙрдЧ рдХрдВрд╕реЛрд▓ рдореЗрдВ рдЖрдЙрдЯрдкреБрдЯ рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ `logs/` рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдХреЗ рднреАрддрд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рд▓рд┐рдЦреЗ рдЬрд╛рддреЗ рд╣реИрдВ:

* `logs/error.log`: рд╕рднреА `error` рд╕реНрддрд░ рдХреЗ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рд░рд┐рдХреЙрд░реНрдб рдХрд░рддрд╛ рд╣реИред
* `logs/combined.log`: рд╕рднреА `info` рдФрд░ рдЙрдЪреНрдЪрддрд░ рд╕реНрддрд░ рдХреЗ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рд░рд┐рдХреЙрд░реНрдб рдХрд░рддрд╛ рд╣реИред
**Chatlefy by Smart Tell Line**
